# 第9章 层次模型

[TOC]

## 多个简单模型组成的复杂模型

### 层次结构模型

### 单关节模型

### 绘制层次模型

### 多节点模型

### 绘制部件

## 着色器和着色器程序对象

创建和初始化着色器的具体步骤：

1. 创建着色器对象（`gl.createShader()`）;
2. 向着色器对象中填充着色器程序的源代码（`gl.shaderSource()`）;
3. 编译着色器（`gl.compileShader()`）;
4. 创建程序对象（`gl.createProgram()`）；
5. 为程序对象分配着色器（`gl.attachShader()`）；
6. 连接程序对象（`gl.linkProgram()`）；
7. 使用程序对象（`gl.useProgram()`）。

着色器对象：着色器对象管理一个顶点着色器或一个片元着色器。每个着色器都有一个着色器对象。

程序对象：程序对象是管理着色器对象的容器。WebGL中，一个程序对象必须包含一个顶点着色器和一个片元着色器。

### 创建着色器对象

### 指定着色器对象的代码

### 编译着色器

### 创建程序对象

### 为程序对象分配着色器对象

### 连接程序对象

### 告知WebGL系统所使用的程序对象

```js
gl.useProgram(program) //参数program为指定待使用的程序对象
```
这个函数的存在带给WebGL的强大特性：在绘制前准备多个程序对象，然后在绘制的时候根据需要切换程序对象。

本质上，该函数顺利执行后，顶点着色器和片元着色器已经就位了，只需调用`gl.drawArrays()`h或`gl.drawElements()`来使整个WebGL系统运行起来。