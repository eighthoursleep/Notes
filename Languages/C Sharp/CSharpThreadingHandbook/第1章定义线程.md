# 第1章 定义线程

[TOC]

**线程技术**是指开发架构将应用程序的一部分分离为“线程”，使线程与程序其余部分的执行步骤不一致。

在绝大多数编程语言中，都有一个相当于Main()的方法，该方法中每一行都按顺序执行，下一行代码只能在前一行代码执行完之后才能执行。

线程是一种特殊的对象，是操作系统执行多任务的一部分，它允许应用程序的一部分独立于其他对象而单独运行，因此也就脱离了应用程序常规的执行顺序。

# 一、线程的定义

## 1.1 多任务

## 1.2 进程

当启用应用程序时，系统就会为该应用程序分配所需的内存以及其他资源。内存和资源的物理分离叫做进程。

应用程序可以启动多个进程。“应用程序”和“进程”并不是同义词。

分配给进程的内存与其他进程分配的内存被隔离，只有所属的那个进程才可以访问它。

## 1.3 线程

进程有一个由计算机的处理器使用的执行次序。这个执行次序就称为线程。

进程由寄存器定义，记录CPU的使用情况、线程使用的堆栈以及跟踪线程当前状态的容器。

这个容器叫作线程本地存储区（Thread Local Storage）。

### 1.3.1 单线程的进程

每个进程至少有一个执行顺序或线程。

创建一个进程包括在指令中的某一点启动进程。

线程的实际执行顺序是由应用程序中的方法代码来决定的。例如一个简单的.NET Windows Forms应用程序中，主线程是在项目的静态方法Main()中启动。它最先以调用Application.Run()开始。

![一个进程的可视模型](pics\\1_3.png)

在一个进程中，线程和数据一样放在同一隔离区域，在这个进程中声明的数据可以通过线程访问数据。

对于进程的正常运行来说，我们不需要知道其他进程以及它们相关联的线程的过多细节。

**注意**：更准确地讲，线程其实是指向进程的指令流部分的一个指针。线程实际上不包含指令，只是指出了当前和将来可能要使用的路径，而这事通过数据和分支判断确定的指令来完成的

### 1.3.2 时间片

### 1.3.3 多线程的进程

### 1.3.4 中断与线程本地存储器的工作原理

#### 中断

#### 线程的终止

#### 线程的优先级

#### 管理优先级


# 二、.NET和C#对线程的支持

## 2.1 System.AppDomain类

## 2.2 线程管理与.NET运行库