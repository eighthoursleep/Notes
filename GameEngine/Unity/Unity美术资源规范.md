# Unity美术资源规范

美术资源规范是判定一个项目好坏的根基。

资源规范是高效运行的前提。

模型太大、模型面数太多、贴图太大、压缩不够都会导致加载过慢、画面卡顿、渲染压力过大。

骨骼数量太多会导致CPU在动画上消耗过多。

资源过多导致CPU在资源加载上时间过长，出现画面帧率下降、卡顿严重等严重问题。

## 如何确定美术资源规范的大小？

### 根据运用的场景来确定

以下是针对手游开发的规范。总的来说，根据项目特点来定，要限制模型的面数、贴图的大小、材质球的数量和骨骼的数量。具体数字需要根据项目特点来定。

#### 单一主角的场景

强调单一主角的场景，由于主要资源全部服务于该主角，因此对主角进行精细化的雕琢很有必要。

单一主角场景的模型即使做到10000面也不为过。

主角的骨骼也可以做的很精细，骨骼数量可以多达70个，贴图大小可以达到2048×2048像素，甚至更大，只是当需求中有换装时需要考虑包体的大小。

#### 卡牌策略游戏

该类游戏的核心时静态的3D人物场景和人物角色的自动攻击。

由于这种类型游戏的场景是固定的，视角不会移动，因此场景模型和人物模型在面数、贴图、材质上可以稍微宽松一些。

卡牌策略游戏中使用的人物模型通常在7000面左右，骨骼数量可达到40个。

贴图大小可以为1024×1024像素，因为模型数量在视角下并不多，所以可以稍微放开些，但不能太宽松。

#### 第三人称视角的RPG

由于视角是第三人称自由视角，同时开到的场景范围会更多一些，视角下的模型数量也会比较多。

因此角色模型的面数要控制在3000面以下，骨骼数量控制在30个以下。

建筑模型面数因大小差异而无法统一，可以分成大型建筑7000面以下，中型建筑5000面以下，小型建筑3000面以下，小部件则控制在1000面以下。

贴图最好为512×512像素及以下，角色和中大型模型主贴图为512×512像素，副贴图为256×256像素，小型和小部件贴图控制在128×128像素及以下。

#### 塔防游戏

因为是从上往下俯视的视角，所以同屏幕能看到模型数量非常多，包括建筑物、人物、机械坦克等。

人物模型限制在2500面以内，建筑则限制在5000面、3000面或2000面以内，其他小部件则限制在750面以内。

贴图基本上以256×256像素为主，副贴图为128×128像素。

材质球数量不要超过2个。

#### 类似《塞尔达传说》、《和平精英》的超大型游戏

因为需要从高空俯瞰整个场景，渲染压力比较大，除了制定美术资源规范外，还需借助其他方法，比如LOD。

LOD可以把渲染压力和渲染质量平衡得很好。



### 使用反推计算得出规范

对于一些模型物体大小差异比较大的、无法统一模型与贴图面数的，可以使用全场景总面数来控制。



### 规范自动检测

无论采用什么方法，都需要不断地检测资源，项目一直在向前推进，资源不断得到修改和新增，我们需要有一套检测系统来检测资源的问题。

如果在项目中进行前加入实际压力测试环节，或者在项目进行中加入渲染压力测试的环节，则会更有利于对美术资源的规范。

在项目，特别是大型项目中做渲染压力测试非常有必要。专门派人完成这件事，做好前期的规划和测试一种对项目负责的做法，这样能够更好地保障项目的安全。然而实际情况大多是边开发边测试，甚至项目最后上线前集中进行一大波优化。

以人工方式寻找美术资源规范无论多严谨都会有遗漏，不能形成系统化的流程与规范。

因此需要编写一个美术资源规范检测程序，应该设定2~3小时运行一次，运行后提醒我们有多少资源存在不规范的情况，分别是哪些资源，并罗列出来，甚至细化到最近一次是谁提交的。

代码示例：

```c#
```

大致意思是我们在检查工程中把资源在Unity中不符合规则的设置输出到文件中，告知大家哪些资源文件有问题。把这个程序放在打包机上，或者专门用于检测的流水线上，每1~2小时运行一次，用微信或企业微信的方式告知大家。

大多数大项目都会有类似的离线检测程序，在项目开发中能时刻检测问题资源，包括模型面数规范、贴图大小规范、贴图压缩格式规范、着色器的使用规范、UI贴图设置规范、Prefab层级和大小规范、材质球数量规范、动画数据大小规范等。

工具推荐：UWA本地资源检测工具。

此工具涵盖了前面提到的对静态资源的检测，包括网格数据、纹理贴图、音频格式、材质设置、动画数据、着色器、视频格式、Prefab数据等，检测内容包括资源属性、资源内容、变体分析等。它还有具有粒子特效性能检测功能。具有场景检测、代码扫描、行业阈值等功能，可为进行优化和静态扫描工作的人员节省不少时间。