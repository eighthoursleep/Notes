# 第11章 动画系统

[TOC]

任何非百分百刚性的物体都可以利用动画系统

## 11.1 角色动画的类型

### 11.1.1 赛璐璐动画

### 11.1.2 刚性层阶式动画

### 11.1.3 每顶点动画及变形目标

### 11.1.4 蒙皮动画

### 11.1.5 把动画方法视为数据压缩技术

## 11.2 骨骼

### 11.2.1 骨骼层阶结构

### 11.2.2 在内存中表示骨骼

## 11.3 姿势

### 11.3.1 绑定姿势

### 11.3.2 局部姿势

#### 11.3.2.1 关节缩放

#### 11.3.2.2 在内存中表示关节姿势

#### 11.3.2.3 把关节姿势当作基的变更

### 11.3.3 全局姿势

#### 11.3.3.1 在内存中表示全局姿势

## 11.4 动画片段

### 11.4.1 局部时间线

#### 11.4.1.1 姿势插值及连续时间

#### 11.4.1.2 时间单位

#### 11.4.1.3 比较帧与采样

#### 11.4.1.4 帧、采样及循环片段

#### 11.4.1.5 归一化时间（相位）

### 11.4.2 全局时间线

### 11.4.3 比较局部和全局时钟

#### 11.4.3.1 用局部时钟同步动画

#### 11.4.3.2 用全局时钟同步动画

### 11.4.4 简单的动画数据格式

#### 11.4.4.1 动画重定目标

### 11.4.5 连续的通道函数

### 11.4.6 元通道

## 11.5 蒙皮及生成矩阵调色

### 11.5.1 每顶点的蒙皮信息

### 11.5.2 蒙皮的数学

#### 11.5.2.1 单个关节骨骼的例子

#### 11.5.2.2 扩展至多个关节的骨骼

#### 11.5.2.3 引入模型至世界变换

#### 11.5.2.4 把顶点蒙皮至多个关节

## 11.6 动画混合

### 11.6.1 线性插值混合

### 11.6.2 线性插值混合的应用

#### 11.6.2.1 时间性混合

#### 11.6.2.2 动作连续性：淡入/淡出

#### 11.6.2.3 方向性动作

### 11.6.3 复杂的线性插值混合

#### 11.6.3.1 泛化的一维线性插值混合

#### 11.6.3.2 简单的二维线性插值混合

#### 11.6.3.3 三角形的二维线性插值混合

#### 11.6.3.4 泛化的二维线性插值混合

### 11.6.4 骨骼分部混合

### 11.6.5 加法混合

#### 11.6.5.1 数学公式

#### 11.6.5.2 比较加法混合和分部混合

#### 11.6.5.3 加法混合之局限

### 11.6.6 加法混合的应用

#### 11.6.6.1 站姿变化

#### 11.6.6.2 移动噪声

#### 11.6.6.3 瞄准及注视

#### 11.6.6.4 时间轴的另类用途

## 11.7 后期处理

### 11.7.1 程序式动画

### 11.7.2 逆运动学

### 11.7.3 布娃娃


## 11.8 压缩技术

### 11.8.1 通道省略

### 11.8.2 量化

### 11.8.3 采样频率及键省略

### 11.8.4 基于曲线的压缩

### 11.8.5 选择性载入及串流

## 11.9 动画系统架构

## 11.10 动画管道

### 11.10.1 数据结构

#### 11.10.1.1 共享资源数据

#### 11.10.1.2 每个实例数据

### 11.10.2 扁平的甲醛平均混合表示法

#### 11.10.2.1 例子：OGRE

#### 11.10.2.2 例子：Granny

### 11.10.3 混合树

#### 11.10.3.1 二元LERP混合

#### 11.10.3.2 泛化一维LERP混合

#### 11.10.3.3 简单二维LERP混合

#### 11.10.3.4 三角LERP混合

#### 11.10.3.5 泛化三角LERP混合

#### 11.10.3.6 加法混合

### 11.10.4 淡入/淡出架构

#### 11.10.4.1 扁平加权平均的淡入/淡出

#### 11.10.4.2 表达式树的淡入/淡出

### 11.10.5 动画管道的优化

#### 11.10.5.1 PlayStation2上的优化

#### 11.10.5.2 PlayStation3上的优化

#### 11.10.5.3 Xbox及Xbox360上的优化

## 11.11 动作状态机

### 11.11.1 动画状态

#### 11.11.1.1 状态及混合树规格

#### 11.11.1.2 自定义混合树节点类型

#### 11.11.1.3 例子：顽皮狗的神秘海域引擎

#### 11.11.1.4 例子：虚幻引擎3

### 11.11.2 过渡

#### 11.11.2.1 过渡的种类

#### 11.11.2.2 过渡的参数

#### 11.11.2.3 过渡矩阵

#### 11.11.2.4 实现过渡矩阵

### 11.11.3 状态层

### 11.11.4 控制参数

### 11.11.5 约束

#### 11.11.5.1 依附

#### 11.11.5.2 跨物体对准

#### 11.11.5.3 抓取及手部IK

#### 11.11.5.4 动作提取及脚部IK

#### 11.11.5.5 其他类型的约束


## 11.12 动画控制器